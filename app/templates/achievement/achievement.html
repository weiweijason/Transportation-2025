{% extends "base.html" %}

{% block title %}æˆå°± - ç²¾éˆå…¬è»Š{% endblock %}

{% block content %}
<div class="achievement-container">
    <!-- é é¢æ¨™é¡Œ -->
    <div class="achievement-header">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h1 class="achievement-title">
                        <i class="fas fa-trophy achievement-title-icon"></i>
                        éŠæˆ²æˆå°±æ®¿å ‚
                    </h1>
                    <p class="achievement-subtitle">æ”¶é›†æˆå°±ï¼Œè¦‹è­‰ä½ çš„å†’éšªæ­·ç¨‹</p>
                </div>
                <div class="col-md-4 text-end">
                    <div class="achievement-search-container">
                        <input type="text" id="achievementSearch" class="achievement-search" placeholder="ğŸ” æœå°‹æˆå°±...">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- æˆå°±çµ±è¨ˆå„€è¡¨æ¿ -->
    <div class="achievement-stats-dashboard">
        <div class="container">
            <div class="row g-4">
                <div class="col-lg-3 col-md-6">
                    <div class="stat-card total-achievements">
                        <div class="stat-icon">
                            <i class="fas fa-list-ol"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number" id="totalAchievements">0</div>
                            <div class="stat-label">ç¸½æˆå°±æ•¸</div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="stat-card completed-achievements">
                        <div class="stat-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number" id="completedAchievements">0</div>
                            <div class="stat-label">å·²å®Œæˆ</div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="stat-card completion-rate">
                        <div class="stat-icon">
                            <i class="fas fa-percentage"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number" id="completionRate">0%</div>
                            <div class="stat-label">å®Œæˆç‡</div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="stat-card recent-achievements">
                        <div class="stat-icon">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number" id="recentAchievements">0</div>
                            <div class="stat-label">è¿‘æœŸç²å¾—</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ç¯©é¸é¸é … -->
    <div class="achievement-filters">
        <div class="container">
            <div class="filter-tabs">
                <button class="filter-tab active" data-filter="all">
                    <i class="fas fa-th"></i> å…¨éƒ¨
                </button>
                <button class="filter-tab" data-filter="completed">
                    <i class="fas fa-check"></i> å·²å®Œæˆ
                </button>
                <button class="filter-tab" data-filter="incomplete">
                    <i class="fas fa-clock"></i> æœªå®Œæˆ
                </button>
            </div>
        </div>
    </div>

    <!-- æˆå°±åˆ†é¡å±•ç¤º -->
    <div class="achievement-categories">
        <div class="container">
            <div id="achievementAccordion" class="achievement-accordion">
                <!-- é€™è£¡ç”¨JSæ’å…¥æˆå°±åˆ†é¡é …ç›® -->
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/achievement/achievement.css') }}">
{% endblock %}

{% block extra_js %}
<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>

<script>
  // åˆå§‹åŒ–Firebase
  const firebaseConfig = {
    apiKey: "{{ firebase_config.apiKey }}",
    authDomain: "{{ firebase_config.authDomain }}",
    projectId: "{{ firebase_config.projectId }}",
    storageBucket: "{{ firebase_config.storageBucket }}",
    messagingSenderId: "{{ firebase_config.messagingSenderId }}",
    appId: "{{ firebase_config.appId }}"
  };

  if (!firebase.apps.length) {
    firebase.initializeApp(firebaseConfig);
  }
  var db = firebase.firestore();
  window.currentUserId = "{{ session['user']['uid'] }}";
</script>

<script src="{{ url_for('static', filename='js/achievement/achievement.js') }}"></script>
{% endblock %}
